<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Webserv</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link rel="stylesheet" href="assets/css/styles.css" />
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="shortcut icon" type="image/x-icon" href="https://i.postimg.cc/rmKr57y8/crane-favicon.png"/>
		<!--<script src="/mon.js" defer></script>-->
	</head>
	<!--
		<body class ="is-preload">
	<body>
	-->
	<body class ="is-preload">
		<div class="topnav">
			<a href="/" class="nav-link">Home</a>
			<a href="/#request" class="nav-link">Requests</a>
			<a href="/#script">CGI Scripts</a>
			<a href="/#review">Reviews</a>
		</div>
		<div class="ParallaxVideo" id="parallaxRandom">
			<video autoplay muted loop>
				<source src="https://www.shutterstock.com/shutterstock/videos/1063899529/preview/stock-footage--d-render-animation-of-cyclone-large-scale-air-mass-that-rotates-around-a-strong-center.webm" type="video/mp4"/>
			</video>
		</div>
		<div class="ParallaxMainContent">
			<div class="container-random">
				<article class="presentation" id="random-page">
					<p class="welcome-p" id="hierophant">Dive into nothingness</p>
					<a href="/cgi/infinite_loop.cgi" id="generate-link"><button class="check-button" id="infinity-btn">Generate infinity</button></a>

					<!--
					<div id="infinite-loop">
						<div class="loader" style="display: none"></div>
					</div>
					-->
				<!--	
					<div class="loader"></div>
					<div id ="infinite-loop" class="loader" style="display:none;"></div>

					<div id ="infinite-loop" style="display:none;">
						<div class="loading-container">
							<div class="sphere"></div>
							<div class="orbiting-loader"></div>
						</div>
					</div>
				-->
<div id="loader-container" style="display: none;">
    <div class="loading-wrapper">
        <div class="sphere"></div>
        <div class="loader"></div>
    </div>
</div>
					<div id="cgi-response"></div>
					<div class="card" style="width: 13rem;" id="moon-infinite">
						<!--<img src="images/moon.jpeg" alt="" style="width: 100%">-->
						<img src="https://i.postimg.cc/qByGYdLS/moon.png" alt="" style="width: 100%">
					</div>
				</article>
				<script>
					document.getElementById("generate-link").addEventListener("click", function (event) {
						event.preventDefault(); // Prevent default link behavior
						const xhr = new XMLHttpRequest();
						const loader = document.getElementById("loader-container");
						loader.style.display = "flex";
						xhr.open("GET", "/cgi/infinite_loop.cgi", true);
					  xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
			loader.style.display = "none";
                    if (xhr.status === 200) {
                        // On remplace le contenu par la réponse du CGI
                        document.getElementById("cgi-response").innerHTML = xhr.responseText;
                    } else {
                        // Si l'appel échoue, on peut afficher une erreur
                        document.getElementById("cgi-response").innerHTML = "Error loading data.";
                    }
                    // Cache le loader après la réponse
//                    document.getElementById("infinite-loop").style.display = "none";
                }
            };

						xhr.send(); // Send the request
					});
				</script>
			</div>
		</div>
		<footer>
			<p>Follow us on GitHub</p>
			<div class="flex-container">
				<div class="jdufour"><a href="https://github.com/rmnina" target="_blank"><i style="font-size:24px" class="fa">&#xf09b;</i><p>jdufour</p></a></div>
				<div class="ahayon"><a href="https://github.com/Skiams" target="_blank"><i style="font-size:24px" class="fa">&#xf09b;</i><p>ahayon</p></a></div>
				<div class="eltouma"><a href="https://github.com/eltouma" target="_blank"><i style="font-size:24px" class="fa">&#xf09b;</i><p>eltouma</p></a></div>
			</div>
		</footer>


	</body>
</html>

