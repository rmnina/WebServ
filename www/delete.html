<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Webserv</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link rel="stylesheet" href="assets/css/styles.css" />
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
		<!--<script src="/mon.js" defer></script>-->
	</head>
	<!--
		<body class ="is-preload">
	-->
	<body class="ParallaxMainContent">
		<div class="topnav">
			<a class="active" href="/">Home</a>
		</div>
		<div id="file-list">
		</div>
		<script>
			const files = ["lovers.jpeg", "lovers1.jpeg", "magician.jpeg", "death.jpeg", "the_world.jpeg"];
			const fileList = document.getElementById("file-list");

			files.forEach((fileName) => {
				const fileWrapper = document.createElement("div");
				fileWrapper.innerHTML = `
					<img src="uploaded/${fileName}" alt="${fileName}" style="width: 10%"></br>
					<input type="checkbox" onclick="deleteFile('${fileName}')">
					<i class="fas fa-trash"></i>
					</br></br>
				`;
				fileList.appendChild(fileWrapper);
			});
			function deleteFile(fileName) {
				if (confirm(`Are you sure you want to delete ${fileName} ?`)) {
					fetch(`http:/127.0.0.1:8082/delete/uploaded/${fileName}`, {
						method: 'DELETE',
						headers: {
							'Authorization': 'Bearer YOUR_ACCESS_TOKEN',
							'Content-Type': 'application/json'
						},
					}).then(response => {
						if (response.ok) {
							console.log(`${fileName} successfully deleted.`);
							const file = document.querySelector(`img[src="uploaded/${fileName}"]`).parentElement;
							if (file) {
								file.remove();
							}
						} else {
							console.error(`Error: ${fileName}: ${response.status}`);
							console.log(`Error: ${fileName}: ${response.status}`);
						}
					}).catch((error) => {
						console.log(`Error: `, error);
					});
					}
				}
		</script>
	</body>
</html>

